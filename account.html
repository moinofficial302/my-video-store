<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Account | AKANS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- MAIN CSS -->
  <link rel="stylesheet" href="css/login.css" />
  <link rel="stylesheet" href="css/nav.css" />

  <!-- ğŸ”¥ ONLY AUTH + FIREBASE -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/auth.js"></script>

  <style>
    html,body{
      margin:0;
      padding:0;
      background:#f3f5f9;
      font-family:sans-serif;
    }

    .account-wrap{
      padding:16px;
      max-width:520px;
      margin:auto;
    }

    .card{
      background:#fff;
      border-radius:14px;
      padding:16px;
      margin-bottom:14px;
      box-shadow:0 6px 14px rgba(0,0,0,.06);
    }

    .profile{
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .profile img{
      width:44px;
    }

    .wallet{
      text-align:center;
    }

    .wallet h2{
      margin:6px 0 0;
    }

    .menu-item{
      padding:14px;
      border-bottom:1px solid #eee;
      cursor:pointer;
    }

    .menu-item:last-child{
      border:none;
    }

    .logout{
      color:#e53935;
      font-weight:600;
    }
  </style>
</head>

<body>

<div class="account-wrap">

  <!-- ===========================
       PROFILE
  ============================ -->
  <div class="card profile">
    <div>
      <h3 id="userName">User</h3>
      <p id="userEmail">user@email.com</p>
    </div>
    <img src="assets/logo.png" />
  </div>


  <!-- ===========================
       COINS
  ============================ -->
  <div class="card wallet">
    <div>ğŸ’° Coins</div>
    <h2 id="coinBalance">0</h2>
  </div>


  <!-- ===========================
       REFERRAL WALLET
  ============================ -->
  <div class="card wallet">
    <div>ğŸ¤ Referral Wallet</div>
    <h2 id="referralBalance">0</h2>
  </div>


  <!-- ===========================
       MENU
  ============================ -->
  <div class="card">

    <div class="menu-item" onclick="location.href='add-money.html'">
      â• Add Money
    </div>

    <div class="menu-item" onclick="location.href='my-orders.html'">
      ğŸ“¦ My Orders
    </div>

    <div class="menu-item" onclick="location.href='coupon.html'">
      ğŸŸ Coupon Code
    </div>

    <!-- ğŸ”¥ ONLY ONE REFERRAL PAGE -->
    <div class="menu-item" onclick="location.href='super-refer.html'">
      ğŸš€ Super Refer & Earn
    </div>

    <div class="menu-item" onclick="location.href='withdraw.html'">
      ğŸ’¸ Withdraw Amount
    </div>

    <div class="menu-item logout" onclick="logoutUser()">
      ğŸšª Logout
    </div>

  </div>

</div>



<!-- ===========================
     USER LOAD
=========================== -->
<script type="module">
  import { auth, db } from "./js/firebase-init.js";
  import { onAuthStateChanged }
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { doc, getDoc }
    from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  onAuthStateChanged(auth, async (user) => {

    if (!user) {
      window.location.href = "login.html";
      return;
    }

    document.getElementById("userEmail").innerText = user.email;

    const snap = await getDoc(doc(db,"users",user.uid));

    if (!snap.exists()) return;

    const data = snap.data();

    document.getElementById("userName").innerText =
      data.username || "User";

    document.getElementById("coinBalance").innerText =
      data.coins || 0;

    document.getElementById("referralBalance").innerText =
      data.referralBalance || 0;
  });
</script>



<!-- ===========================
     BOTTOM NAV
=========================== -->
<div class="bottom-nav">

  <button onclick="location.href='index.html'">Bundle</button>
  <button onclick="location.href='ai-editing.html'">AI & Editing</button>
  <button onclick="location.href='social.html'">Social</button>
  <button class="active">Account</button>

</div>

</body>
</html>
