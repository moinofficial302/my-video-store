<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Account | AKANS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- MAIN CSS -->
  <link rel="stylesheet" href="css/login.css">
  <link rel="stylesheet" href="css/nav.css">

  <style>
    html, body{
      width:100%;
      margin:0;
      padding:0;
    }

    .account-wrap{
      width:100%;
      padding:14px;
    }

    .profile-card,
    .wallet-card,
    .menu-list{
      width:100%;
    }
  </style>

  <!-- Firebase + Auth -->
  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/auth.js"></script>
</head>


<body>

<div class="account-wrap">

  <!-- ================= PROFILE ================= -->

  <div class="profile-card profile-flex">
    <div class="profile-text">
      <h3 id="userName">AKANS User</h3>
      <p id="userEmail">user@gmail.com</p>
    </div>

    <img src="assets/logo.png" class="profile-logo">
  </div>



  <!-- ================= WALLET ================= -->

<!-- ================= WALLET ================= -->

<div class="wallet-card">
  <span>ğŸ’° Coins</span>
  <h2 id="coinBalance">0</h2>
</div>

<div class="wallet-card">
  <span>ğŸ¤ Referral Wallet</span>
  <h2 id="referralBalance">0</h2>
</div>



  <!-- ================= MENU ================= -->

  <div class="menu-list">

    <div class="menu-item" onclick="location.href='add-money.html'">
      â• Add Money
    </div>

    <div class="menu-item" onclick="location.href='my-orders.html'">
      ğŸ“¦ My Orders
    </div>

    <div class="menu-item" onclick="location.href='coupon.html'">
      ğŸŸ Coupon Code
    </div>

    <!-- âœ… ONLY SINGLE REFERRAL PAGE -->
    <div class="menu-item" onclick="location.href='refer.html'">
      ğŸ”— Refer & Earn
    </div>

    <div class="menu-item" onclick="location.href='withdraw.html'">
      ğŸ’¸ Withdraw Amount
    </div>

    <div class="menu-item">ğŸ‘¥ Community</div>
    <div class="menu-item">â¬‡ Download App</div>
    <div class="menu-item">â­ Rating</div>

    <div class="menu-item" onclick="location.href='about.html'">
  â„¹ About Information
    </div>
    

    <div class="menu-item logout" onclick="logoutUser()">
      ğŸšª Logout
    </div>

  </div>

</div>



<!-- ================= USER INFO LOAD ================= -->

<script type="module">
import { auth, db } from "./js/firebase-init.js";
import { onAuthStateChanged }
  from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { doc, getDoc }
  from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

onAuthStateChanged(auth, async (user) => {

  if (!user) {
    window.location.href = "login.html";
    return;
  }

  document.getElementById("userEmail").innerText = user.email;

  const snap = await getDoc(doc(db, "users", user.uid));

  if (!snap.exists()) return;

  const data = snap.data();

  document.getElementById("userName").innerText =
    data.username || user.displayName || "AKANS User";

  document.getElementById("coinBalance").innerText =
    data.coins || 0;

  document.getElementById("referralBalance").innerText =
    data.referralBalance || 0;
});
</script>



<!-- ================= BOTTOM NAV ================= -->

<div class="bottom-nav">

  <button class="nav-item" onclick="location.href='index.html'">
    Bundle
  </button>

  <button class="nav-item" onclick="location.href='ai-editing.html'">
    AI & Editing
  </button>

  <button class="nav-item" onclick="location.href='social.html'">
    Social
  </button>

  <button class="nav-item active" onclick="location.href='account.html'">
    Account
  </button>

</div>



<!-- NAV ACTIVE + HIDE -->

<script>
document.addEventListener("DOMContentLoaded", () => {

  const current = window.location.pathname.split("/").pop();

  document.querySelectorAll(".nav-item").forEach(btn=>{
    if(btn.textContent.toLowerCase().includes(current?.replace(".html","")))
      btn.classList.add("active");
  });

  let lastScroll = 0;
  const nav = document.querySelector(".bottom-nav");

  window.addEventListener("scroll", () => {
    const y = window.pageYOffset;

    if(y > lastScroll && y > 80) nav.classList.add("hide");
    else nav.classList.remove("hide");

    lastScroll = y;
  });
});
</script>

</body>
</html>
